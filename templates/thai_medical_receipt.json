{
  "name": "thai_medical_receipt",
  "description": "Template for Thai medical receipt extraction with billing items",
  "fields": {
    "hospital_name": {
      "description": "ชื่อโรงพยาบาล",
      "required": false,
      "type": "string",
      "method": "first_match",
      "config": {
        "keyword": "โรงพยาบาล"
      },
      "post_process": "trim"
    },
    "hn": {
      "description": "HN number",
      "required": false,
      "type": "string",
      "method": "pattern",
      "config": {
        "pattern": "HN\\s*:\\s*[A-Z0-9-]+"
      },
      "post_process": "extract_numbers"
    },
    "an": {
      "description": "AN/EN number",
      "required": false,
      "type": "string",
      "method": "pattern",
      "config": {
        "pattern": "EN\\s*:\\s*[A-Z0-9-]+"
      },
      "post_process": "extract_alphanumeric"
    },
    "print_date": {
      "description": "วันที่พิมพ์",
      "required": false,
      "type": "date",
      "method": "pattern",
      "config": {
        "pattern": "\\d{1,2}/\\d{1,2}/\\d{4}"
      },
      "post_process": "extract_date"
    },
    "treatment_date": {
      "description": "รับการรักษาวันที่",
      "required": false,
      "type": "date",
      "method": "pattern",
      "config": {
        "pattern": "\\d{1,2}/\\d{1,2}/\\d{4}"
      },
      "post_process": "extract_date"
    },
    "gross_amount": {
      "description": "ค่ารักษาพยาบาลรวม (ยอดรวมก่อนหักส่วนลด)",
      "required": false,
      "type": "decimal",
      "method": "pattern",
      "config": {
        "pattern": "\\d{1,3}[,.]?\\d{3}[,.]?\\d{2}"
      },
      "post_process": "extract_numbers"
    },
    "discount_total": {
      "description": "ส่วนลดรวม",
      "required": false,
      "type": "decimal",
      "method": "pattern",
      "config": {
        "pattern": "\\d+\\.\\d{2}"
      },
      "post_process": "extract_numbers"
    },
    "net_amount": {
      "description": "ราคาสุทธิ (ยอดรวมหลังหักส่วนลด)",
      "required": false,
      "type": "decimal",
      "method": "pattern",
      "config": {
        "pattern": "\\d{1,3}[,.]?\\d{3}[,.]?\\d{2}"
      },
      "post_process": "extract_numbers"
    },
    "billing_items": {
      "description": "รายการค่ารักษาพยาบาล",
      "required": false,
      "type": "array",
      "method": "table",
      "config": {
        "table_start": "รายการค่ารักษาพยาบาล",
        "columns": [
          "billing_code",
          "billing_desc",
          "amount",
          "discount",
          "net_amount"
        ]
      },
      "post_process": "parse_billing_items"
    }
  },
  "output_structure": {
    "extraction_type": "Medical Receipt",
    "confidence": 0.9,
    "extracted_data": {
      "document_code": "CM0000095",
      "document_type": "Medical Receipt",
      "need_correction": false,
      "total_page": "1",
      "page": "1",
      "document_info": [
        {
          "accuracyRate": 90,
          "type": "string",
          "code": "hospital_name",
          "value": "${hospital_name}",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "string",
          "code": "hn",
          "value": "${hn}",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "string",
          "code": "an",
          "value": "${an}",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "decimal",
          "code": "gross_amount",
          "value": "${gross_amount}",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "integer",
          "code": "number_of_admit",
          "value": "-",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "date",
          "code": "admission_date",
          "value": "${treatment_date}",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "date",
          "code": "discharge_date",
          "value": "-",
          "page": "1"
        },
        {
          "accuracyRate": 90,
          "type": "array",
          "code": "billing_items",
          "page": "1",
          "value": "${billing_items}"
        }
      ]
    },
    "metadata": {
      "source_length": "@text_blocks_count",
      "processing_time": "@processing_time",
      "detected_language": "th",
      "entities_found": []
    }
  }
}